## 基本概念
ios开发中，各种证书的核心技术: **非对称加密技术**(即 公钥/私钥加密技术)  
2个关键概念:  
+ 数字签名  
+ 数字证书  

## 数字签名
**Digital Signature** 相当于盖章、签字。 可以识别篡改和伪装。  
2种行为:  
+ 签名生成
+ 签名验证

### 签名生成
由发起方进行  
首先对通信内容进行hash  
然后使用发送方的私钥加密  
最终得到签名。  
Message -> Digest -> Signature  

### 签名验证
由接收方进行  
发送方会把 **消息、签名** 一起发送给接收方  
接收方使用发送方的公钥对签名解密, 得到摘要1  
然后使对消息进行hash, 得到摘要2  
对比摘要1、2是否一致

接收方如何获取发送方的公钥呢? 如何确定公钥确实来自于发送方? **数字证书**来解决。  

## 数字证书
**Digital Certificate** 相当于身份证。 包含个人/机构的身份信息+公钥。 因此也叫做 **公钥证书(Public-Key Certificate, PKC)**  
类似身份证由权威的公安局颁发, PKC由权威的 **认证机构(Certificate Authority, CA)**颁发。  
CA 向接收方提供发送方的证书。 
CA 会将身份信息+公钥用 **CA私钥**进行签名  
进而将身份信息+公钥+签名一起放入证书。  
![](https://chuquan-public-r-001.oss-cn-shanghai.aliyuncs.com/sketch-images/certificate.png?x-oss-process=image/resize,w_800)  

## 根证书
接收方拿到发送方证书时，通过**CA公钥**对证书进行验证  
![](https://chuquan-public-r-001.oss-cn-shanghai.aliyuncs.com/sketch-images/certificate-validation.png?x-oss-process=image/resize,w_800)  
很多情况下, CA公钥是由一个更加权威的机构颁发, 类似地方公安局的证书由市级公安局颁发。  
证书具有信任链(Chain of Trust)  
根证书(Root Certificate)是信任源  
颁发者为: **Root Certificate Authority (Root CA)**  
- 根证书 Root Certificate
- 中间证书 Intermediate Certificate
- 叶子证书 Leaf Certificate 
根证书随着软件一起安装的, 比如操作系统、浏览器在安装时会内置一份可信的根证书列表。  

## IOS证书
MacOS系统中关于ios开发证书的信任链示例(通过"钥匙串"查看):  
+ Apple Root Certificate Authority: 根证书
	- Apple Worldwide Developer Relations Certification Authority: 中间证书
		- iPhone Developer: **** 叶子证书
		- iPhone Distribution: Apple Tech: 叶子证书
		- Apple Development: ****@apple.com 叶子证书  


![](https://chuquan-public-r-001.oss-cn-shanghai.aliyuncs.com/blog-images/keychain-trust-of-chain.jpeg?x-oss-process=image/resize,w_1000)

[原文参考链接](http://chuquan.me/2020/03/22/ios-certificate-principle/)